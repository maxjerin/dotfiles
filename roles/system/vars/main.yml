---
defaults:
  # Keyboard settings - Fast arrow key movement
  - domain: NSGlobalDomain
    key: InitialKeyRepeat
    name: Set very fast initial key repeat (lower = faster, minimum is 15)
    type: int
    value: "15"  # Minimum value = fastest start (15 is the fastest macOS allows)
  - domain: NSGlobalDomain
    key: KeyRepeat
    name: Set maximum key repeat rate (lower = faster)
    type: int
    value: "1"  # Minimum value = fastest repeat rate

  # Mouse/Trackpad settings
  - domain: NSGlobalDomain
    key: com.apple.mouse.tapBehavior
    name: Enable tap-to-click on Apple mouse
    type: int
    value: "1"

  # Three finger drag/resize for trackpad (internal and Bluetooth)
  - domain: com.apple.AppleMultitouchTrackpad
    key: TrackpadThreeFingerDrag
    name: Enable three finger drag (internal trackpad)
    type: bool
    value: "true"
  - domain: com.apple.driver.AppleBluetoothMultitouch.trackpad
    key: TrackpadThreeFingerDrag
    name: Enable three finger drag (Bluetooth trackpad)
    type: bool
    value: "true"
  # Avoid conflicts by disabling three-finger swipe gestures
  - domain: NSGlobalDomain
    key: com.apple.trackpad.threeFingerSwipeGesture
    name: Disable three-finger swipe gesture globally (prevents conflict with drag)
    type: int
    value: "0"
  - domain: com.apple.AppleMultitouchTrackpad
    key: TrackpadThreeFingerHorizSwipeGesture
    name: Disable three-finger horizontal swipe (internal trackpad)
    type: int
    value: "0"
  - domain: com.apple.driver.AppleBluetoothMultitouch.trackpad
    key: TrackpadThreeFingerHorizSwipeGesture
    name: Disable three-finger horizontal swipe (Bluetooth trackpad)
    type: int
    value: "0"
  # Mirror Accessibility toggle (some macOS versions consult this)
  # Note: This domain may require special permissions and can fail silently
  # The task is configured to ignore failures for this setting
  - domain: com.apple.universalaccess
    key: trackpadThreeFingerDrag
    name: Enable three finger drag (Accessibility mirror)
    type: bool
    value: "true"

  # Dock settings
  - domain: com.apple.dock
    key: autohide
    name: Auto-hide the Dock
    type: bool
    value: "true"
  - domain: com.apple.dock
    key: mineffect
    name: Dock minimize effect (genie = 1, scale = 2, suck = 0)
    type: string
    value: "genie"

# Common formulas that work on both macOS and Linux
homebrew:
  formulas_common:
    - ansible
    - ansible-lint
    - asdf
    - awscli
    - bat
    - fzf
    - go
    - helm
    - k9s
    - kubectl
    - minikube
    - shellcheck
    - starship
    - yamllint
    - zsh-completions
    - zsh-autosuggestions
    - zsh-syntax-highlighting
    # Note: docker is NOT in formulas_common because Docker Desktop (cask) conflicts with docker formula

  # Linux-specific formulas
  formulas_linux:
    - emacs
    - exa
    - openjdk@11
    - pyenv
    - spaceship
    - svn
    - vault
    - yarn
    - z
    - zsh

  # macOS-specific formulas
  formulas_macos:
    - code-cli
    - dive
    - eza
    - gnu-sed  # macOS sed has compatibility issues with bash scripts
    - duti
    - htop
    - jq
    - lazygit
    - mas  # Mac App Store CLI
    - powerline-go
    - tmux
    - yq
    - zoxide
    - dockutil  # Tool for managing Dock apps programmatically

  # macOS-specific taps
  taps_macos:
    - olets/tap

  # macOS-only GUI applications (casks)
  casks_macos_only:
    - 1password-cli
    - 1password
    - appcleaner
    - arc
    - copilot  # Money management app
    - cursor
    - docker-desktop  # Docker Desktop - use docker-desktop cask name (not docker)
    - ghostty
    - grammarly-desktop
    - ha-menu
    - home-assistant
    - intellij-idea-ce
    - karabiner-elements  # macOS-only keyboard remapper
    - msty
    - notion
    - orbstack
    - postico  # macOS-only PostgreSQL client
    - raycast  # macOS-only launcher
    - rescuetime
    - slack
    - stoplight-studio
    - visual-studio-code
    - warp
    - whatsapp
    - zoom

  # Mac App Store applications (macOS-only)
  mas:
    - 961632517  # Be Focused Pro
    - 635758264  # Calca
    - 1056643111  # Clocker
    - 1532419400  # Meeting Bar
    - 1452453066  # Hidden Bar

  # Linux GUI applications (via snap/apt)
  apps_linux:
    - cursor
    - warp
    - slack
    - whatsapp
    - notion
    - docker
    - visual-studio-code

repos:
  - name: spacemacs # Avoid name conflict with repo packaged with rpm: 1password.repo
    description: Spacemacs
    baseurl: https://github.com/syl20bnr/spacemacs
    # gpgkey: https://downloads.1password.com/linux/keys/1password.asc
    system_type: [desktop]
